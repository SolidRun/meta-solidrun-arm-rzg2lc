From 25e8c3ef17e6c6e69581a8247483134a7c0b62f5 Mon Sep 17 00:00:00 2001
From: Mikhail Anikin <mikhail.anikin@solid-run.com>
Date: Mon, 11 Sep 2023 15:56:06 +0300
Subject: [PATCH] HB_EXT: add imx219 camera

---
 .../renesas/rzv2l-hummingboard-extended.dts   | 62 +++++++++++++++++++
 1 file changed, 62 insertions(+)

diff --git a/arch/arm64/boot/dts/renesas/rzv2l-hummingboard-extended.dts b/arch/arm64/boot/dts/renesas/rzv2l-hummingboard-extended.dts
index 55c415adf395..1461374e4d98 100644
--- a/arch/arm64/boot/dts/renesas/rzv2l-hummingboard-extended.dts
+++ b/arch/arm64/boot/dts/renesas/rzv2l-hummingboard-extended.dts
@@ -40,6 +40,36 @@ hdmi_con_out: endpoint {
 			};
 		};
 	};
+
+	imx219_vana_2v8: 2p8v {
+		compatible = "regulator-fixed";
+		regulator-name = "camera_vana";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		regulator-always-on;
+	};
+
+	imx219_vdig_1v8: 1p8v {
+		compatible = "regulator-fixed";
+		regulator-name = "camera_vdig";
+		regulator-min-microvolt = <1500000>;
+		regulator-max-microvolt = <1500000>;
+		regulator-always-on;
+	};
+
+	imx219_vddl_1v2: 1p2v {
+		compatible = "regulator-fixed";
+		regulator-name = "camera_vddl";
+		regulator-min-microvolt = <1200000>;
+		regulator-max-microvolt = <1200000>;
+		regulator-always-on;
+	};
+
+	imx219_clk: osc25250_clk {
+		compatible = "fixed-clock";
+		#clock-cells = <0>;
+		clock-frequency = <24000000>;
+	};
 };
 
 &pinctrl {
@@ -140,6 +170,38 @@ eeprom_carrier: eeprom@57 {
 		pagesize = <16>;
 	};
 
+
+	imx219: sensor@10 {
+		compatible = "sony,imx219";
+		reg = <0x10>;
+		clocks = <&imx219_clk>;
+		VANA-supply = <&imx219_vana_2v8>;
+		VDIG-supply = <&imx219_vdig_1v8>;
+		VDDL-supply = <&imx219_vddl_1v2>;
+		port {
+			imx219_0: endpoint {
+				remote-endpoint = <&csi2_in>;
+				clock-lanes = <0>;
+				data-lanes = <1 2>;
+				link-frequencies = /bits/ 64 <456000000>;
+		 	};
+		};
+	};
+
+};
+
+&csi2 {
+	status = "okay";
+	ports {
+		port {
+			csi2_in: endpoint {
+				clock-lanes = <0>;
+				data-lanes = <1 2>;
+				link-frequencies = /bits/ 64 <456000000>;
+				remote-endpoint = <&imx219_0>;
+			};
+		};
+	};
 };
 
 &dsi0 {
-- 
2.42.0

